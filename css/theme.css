:root{
  /* Fond plus clair */
  --bg1:#1b0c03;        
  --bg2:#3a1706;        

  /* Carte */
  --card:#ffffff14;
  --border:#ffffff25;

  /* Texte */
  --text:#fff7ed;
  --muted:#fed7aa;

  /* Orange principal */
  --primary:#fb923c;
  --primary2:#ff7a1a;

  --shadow: 0 20px 50px rgba(0,0,0,.28);
}



*{ box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
html,body{ height:100%; margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; color:var(--text); }
body{
  background:
    radial-gradient(1200px 700px at 20% 20%, rgba(255,153,51,.35), transparent 60%),
    radial-gradient(900px 600px at 80% 30%, rgba(255,120,0,.35), transparent 60%),
    linear-gradient(160deg, #2a1205, #4a1d08);
}



.wrap{ min-height:100%; display:grid; place-items:center; padding:24px; }
.card{
  width:min(560px, 92vw);
  background: linear-gradient(180deg, var(--card), #ffffff14);
  border:1px solid var(--border);
  border-radius: 14px;
  padding: 26px 22px;
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px);
}

h1{ font-size: clamp(22px, 3.2vw, 32px); }
p{ margin:0 0 18px 0; text-align:center; color:var(--muted); }

.row{ display:flex; gap:12px; justify-content:center; flex-wrap:wrap; }
.btn{
  border:none;
  padding: 14px 18px;
  border-radius: 999px;
  font-size: 16px;
  font-weight: 800;
  cursor:pointer;
  box-shadow: 0 10px 25px rgba(0,0,0,.25);
}
.btn-primary{ background: linear-gradient(180deg, #34d399, var(--primary)); color:#0b1020; }
.btn-ghost{ background:#ffffff22; color:var(--text); border:1px solid var(--border); }

/* --- Faux captcha (style inspiré, sans branding Google) --- */
.captcha{
  width:min(420px, 92vw);
  background:#fff;
  color:#111827;
  border:1px solid #d1d5db;
  border-radius:14px;
  padding:16px 14px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:14px;
  box-shadow: 0 12px 26px rgba(0,0,0,.20);
}

.captcha-left{
  display:flex;
  align-items:center;
  gap:12px;
  min-width: 0;
}

.cbox{
  width:26px;
  height:26px;
  border:2px solid #9ca3af;
  border-radius:6px;
  background:#fff;
  display:grid;
  place-items:center;
  flex: 0 0 auto;
}

.cbox svg{ display:none; }

.captcha-label{
  font-size:16px;
  font-weight:600;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* bloc à droite (ne pas mettre reCAPTCHA/Google) */
.captcha-right{
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  gap:6px;
  flex: 0 0 auto;
}
.captcha-badge{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:12px;
  color:#374151;
  font-weight:700;
}
.captcha-badge .dot{
  width:18px;height:18px;border-radius:6px;
  background: linear-gradient(180deg, #fb923c, #f97316);
  box-shadow: 0 6px 14px rgba(0,0,0,.15);
}
.captcha-meta{
  font-size:10px;
  color:#6b7280;
}

/* états */
.captcha.loading .cbox{
  border-color:#cbd5e1;
  position:relative;
}
.captcha.loading .cbox::after{
  content:"";
  width:16px;height:16px;border-radius:999px;
  border:2px solid #cbd5e1;
  border-top-color:#f97316;
  animation: spin .8s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

.captcha.checked .cbox{
  border-color:#22c55e;
  background:#22c55e;
}
.captcha.checked .cbox svg{
  display:block;
}
.captcha{ margin: 14px auto 0; }
.card{ text-align: center; }

.captcha{
  cursor: pointer;
  user-select: none;
  -webkit-user-select: none;
  transition: transform .08s ease, box-shadow .18s ease;
}
.captcha:active{
  transform: scale(0.99);
}


.robot-wrap{
  display:grid;
  place-items:center;
  margin: 14px 0 18px;
}

.robot-hero{
  width: min(260px, 70vw);
  height: auto;
  filter: drop-shadow(0 18px 35px rgba(0,0,0,.35));
  transform: translateZ(0);
  animation: floaty 4.5s ease-in-out infinite;
}

/* halo orange derrière */
.robot-glow{
  width: min(320px, 78vw);
  height: min(320px, 78vw);
  border-radius: 999px;
  background: radial-gradient(circle at 50% 45%, rgba(249,115,22,.55), rgba(249,115,22,0) 60%);
  position: absolute;
  z-index: 0;
  filter: blur(2px);
}

.robot-layer{
  position: relative;
  display:grid;
  place-items:center;
}

@keyframes floaty{
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}


/* --- Game 1: Captcha grid --- */
.captcha-panel{
  width: min(520px, 94vw);
  background: #fff;
  border: 2px solid rgba(0,0,0,.12);
  border-radius: 18px;
  overflow: hidden;
  box-shadow: 0 18px 45px rgba(0,0,0,.25);
}

.captcha-header{
  background: linear-gradient(180deg, #ff8a3d, #f97316);
  padding: 16px 16px 14px;
  color: #fff;
}
.captcha-header .small{
  font-size: 12px;
  opacity: .95;
  letter-spacing: .2px;
}
.captcha-header .title{
  font-size: 26px;
  font-weight: 900;
  margin-top: 2px;
  line-height: 1.05;
}
.captcha-header .hint{
  font-size: 12px;
  opacity: .95;
  margin-top: 6px;
}

.captcha-grid{
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 6px;
  padding: 10px;
  background:#f5f5f5;
}

.tile{
  position: relative;
  aspect-ratio: 1 / 1;
  border-radius: 10px;
  overflow: hidden;
  cursor: pointer;
  border: 2px solid rgba(0,0,0,.12);
  background:#e5e7eb;
}
.tile img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display:block;
  transform: scale(1.02);
}
.tile::after{
  content:"";
  position:absolute;
  inset:0;
  background: rgba(249,115,22,.22);
  opacity:0;
  transition: opacity .12s ease;
}
.tile.selected{
  border-color: rgba(249,115,22,.9);
  box-shadow: 0 10px 18px rgba(249,115,22,.18);
}
.tile.selected::after{
  opacity:1;
}
.tile.selected .check{
  opacity:1;
  transform: scale(1);
}
.check{
  position:absolute;
  right:10px;
  top:10px;
  width:26px;
  height:26px;
  border-radius:999px;
  background: linear-gradient(180deg, #34d399, #22c55e);
  display:grid;
  place-items:center;
  box-shadow: 0 10px 22px rgba(0,0,0,.18);
  opacity:0;
  transform: scale(.85);
  transition: opacity .12s ease, transform .12s ease;
}
.check svg{ display:block; }

.captcha-footer{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 10px 12px;
  background:#fff;
  border-top: 1px solid rgba(0,0,0,.10);
}

.footer-icons{
  display:flex;
  gap:10px;
  opacity:.75;
}
.iconbtn{
  width:34px;height:34px;
  border-radius:10px;
  border:1px solid rgba(0,0,0,.12);
  background:#ffffff;
  display:grid;
  place-items:center;
}

.verify{
  padding: 10px 14px;
  border-radius: 10px;
  border: none;
  font-weight: 900;
  letter-spacing: .2px;
  cursor:pointer;
  color:#fff;
  background: linear-gradient(180deg, #ff8a3d, #f97316);
  box-shadow: 0 12px 22px rgba(249,115,22,.22);
}
.verify:disabled{
  opacity:.55;
  cursor:not-allowed;
  box-shadow:none;
}

/* mobile friendly */
@media (max-width: 420px){
  .captcha-header .title{ font-size: 22px; }
}


.tile .sticker{
  position:absolute;
  left:50%;
  top:50%;
  height:auto;
  transform: translate(-50%, -50%) scale(.92);
  opacity:0;
  pointer-events:none;
  filter: drop-shadow(0 12px 18px rgba(0,0,0,.25));
  transition: opacity .12s ease, transform .12s ease;
}

/* tailles différentes (plus gros) */
.tile .sticker.good{ width: 72%; }
.tile .sticker.bad { width: 78%; }

.tile.good .sticker.good,
.tile.bad  .sticker.bad{
  opacity:1;
  transform: translate(-50%, -50%) scale(1);
}

/* --- Game: Puzzle --- */
.puzzle-wrap{
  width: min(420px, 92vw);
  margin: 12px auto 0;
}

.puzzle-board{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:8px;
  padding: 12px;
  background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.18);
  border-radius: 18px;
  box-shadow: 0 18px 45px rgba(0,0,0,.22);
}

.piece{
  position: relative;
  aspect-ratio: 1 / 1;
  border-radius: 16px;
  overflow:hidden;
  border: 2px solid rgba(255,255,255,.18);
  background: rgba(0,0,0,.18);
  cursor:pointer;
  -webkit-tap-highlight-color: transparent;
}

.piece::after{
  content:"";
  position:absolute;
  inset:0;
  box-shadow: inset 0 0 0 2px rgba(249,115,22,.0);
  transition: box-shadow .12s ease;
}

.piece.selected::after{
  box-shadow: inset 0 0 0 3px rgba(249,115,22,.95);
}

.piece-inner{
  width:100%;
  height:100%;
  background-size: 300% 300%;
  background-repeat:no-repeat;
  transform: scale(1.02);
}

.puzzle-hint{
  margin-top: 12px;
  color: var(--muted);
  font-size: 13px;
}

.puzzle-actions{
  margin-top: 12px;
  display:flex;
  justify-content:center;
  gap:10px;
  flex-wrap: wrap;
}


.puzzle-grid {
  display: grid;
  grid-template-columns: repeat(3, 110px);
  grid-template-rows: repeat(3, 110px);
  gap: 8px;              /* ⬅️ avant c'était sûrement 16 ou 20 */
  justify-content: center;
}


.piece{
  width:100px;
  height:100px;
  border-radius:12px;
  cursor:pointer;
  box-shadow:0 4px 12px rgba(0,0,0,.2);
  transition:transform .2s;
}

.piece:hover{
  transform:scale(1.05);
}

.piece.active{
  outline:3px solid orange;
}


/* Sliding puzzle */
.sliding-wrap{
  display:flex;
  justify-content:center;
  margin-top:18px;
}

.sliding-grid{
  width:min(360px, 78vw);
  aspect-ratio: 1 / 1;
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(3, 1fr);
  gap:10px;
  padding:12px;
  border-radius:8px;
  background: rgba(255,255,255,0.12);
  box-shadow: 0 10px 30px rgba(0,0,0,.18);
}

.sliding-cell{
  border:0;
  border-radius: 6px;
  background-color: rgba(255,255,255,0.9);
  background-repeat:no-repeat;
  cursor:pointer;
  box-shadow: 0 6px 16px rgba(0,0,0,.18);
  transition: transform .12s ease, filter .12s ease;
  touch-action: manipulation;
}

.sliding-cell:active{
  transform: scale(0.98);
}

.sliding-cell:hover{
  filter: brightness(1.02);
}

.sliding-cell.empty{
  background: rgba(255,255,255,0.25);
  box-shadow: inset 0 0 0 2px rgba(255,255,255,0.15);
  cursor: default;
}


/* --- Final game: rideau + buttons troll + meme --- */
.reward-stage{
  position: relative;
  width: min(520px, 92vw);
  height: 180px;
  margin: 16px auto 0;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.08);
  overflow:hidden;
  box-shadow: 0 18px 45px rgba(0,0,0,.18);
}

.reward-stage.fade-out{
  opacity: .15;
  filter: blur(2px);
  transform: scale(.98);
  transition: all .35s ease;
  pointer-events:none;
}

.btn.yes-trap{
  position:absolute;
  left: 12px;
  top: 12px;
  padding: 10px 14px;
  border-radius: 10px;
  border: 0;
  font-weight: 900;
  cursor: pointer;
  background: linear-gradient(180deg, #ffb26b, #f97316);
  color: #1a0b03;
  box-shadow: 0 12px 22px rgba(249,115,22,.20);
  transform-origin: center;
  touch-action: manipulation;
}

.btn.no-btn{
  position:absolute;
  right: 14px;
  bottom: 14px;
  padding: 12px 18px;
  border-radius: 10px;
  border: 0;
  font-weight: 900;
  cursor: pointer;
  background: rgba(255,255,255,.18);
  color: var(--text);
  box-shadow: 0 12px 22px rgba(0,0,0,.12);
  touch-action: manipulation;
}

/* Rideaux */
.curtain {
  position: absolute;
  top: 0;
  width: 52%;
  height: 100%;
  background: linear-gradient(180deg, #b10016, #7d0010);
  box-shadow: inset -18px 0 35px rgba(0,0,0,.35);
  z-index: 10;
  
  /* MODIFIE JUSTE CETTE LIGNE : passe de 1s à 3s */
  transition: transform 3s cubic-bezier(.2, .9, .2, 1);
}

.curtain-left{ left:0; transform: translateX(0); }
.curtain-right{ right:0; transform: translateX(0); box-shadow: inset 18px 0 35px rgba(0,0,0,.35); }

.curtain-left.open{ transform: translateX(-105%); }
.curtain-right.open{ transform: translateX(105%); }
/* --- Meme overlay (MODIFIÉ) --- */
.meme-screen {
  position: fixed;       /* <--- CHANGE ICI : fixed permet de sortir de la carte */
  top: 0; 
  left: 0; 
  width: 100vw;          /* Prend toute la largeur de l'écran */
  height: 100vh;         /* Prend toute la hauteur de l'écran */
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,.90); /* Fond très sombre pour focus */
  opacity: 0;
  pointer-events: none;
  transition: opacity .3s ease;
  z-index: 9999;         /* <--- Très haut pour passer au-dessus de tout */
  backdrop-filter: blur(8px); /* Floute le jeu derrière */
}

.meme-screen.show {
  opacity: 1;
  pointer-events: auto;
}

.meme-card {
  /* On permet à la carte d'être aussi grande que nécessaire */
  width: auto;
  max-width: 90vw;       /* Marge de sécurité sur mobile */
  background: transparent; /* On enlève le fond de la carte */
  border: none;
  padding: 0;
  text-align: center;
  box-shadow: none;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.meme-card img {
  /* C'est ici qu'on gère la taille de l'image */
  width: auto;           /* Largeur auto pour respecter le ratio */
  height: auto;          /* Hauteur auto */
  max-height: 75vh;      /* <--- IMPORTANT : Limite la hauteur à 75% de l'écran */
  max-width: 100%;       /* Ne dépasse pas la largeur de l'écran */
  border-radius: 12px;
  display: block;
  box-shadow: 0 0 60px rgba(0,0,0, 0.8); /* Grosse ombre dramatique */
  border: 4px solid #fff; /* Petit cadre blanc sympa */
}

/* Le texte sous le meme */
.meme-card p {
  color: white;
  text-shadow: 0 2px 10px rgba(0,0,0,1);
  font-size: 1.2rem;
  margin-top: 20px;
}
/* Laugh float elements */
.laugh-float{
  position:absolute;
  font-weight: 900;
  font-size: 18px;
  color: rgba(255,255,255,.92);
  text-shadow: 0 10px 30px rgba(0,0,0,.45);
  animation: laughPop 3.2s ease-out forwards;
  user-select:none;
  -webkit-user-select:none;
}

@keyframes laughPop{
  0%   { opacity:0; transform: translateY(10px) scale(.85); }
  10%  { opacity:1; }
  100% { opacity:0; transform: translateY(-30px) scale(1.10); }
}

.meme-frame {
  width: min(90vw, 500px);
  aspect-ratio: 1 / 1;
  background: linear-gradient(145deg, #111, #000);
  border-radius: 24px;
  padding: 10px;
}

.meme-frame img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  border-radius: 18px;
}

/* --- GAME 5 : Signature --- */
.signature-pad-wrap {
  background: #fff;
  border-radius: 12px;
  box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
  border: 2px dashed #ccc;
  overflow: hidden;
  touch-action: none; /* Important pour éviter le scroll quand on dessine */
  margin-bottom: 16px;
}

canvas#sig-canvas {
  display: block;
  width: 100%; /* Prend toute la largeur du conteneur */
  height: 200px;
  cursor: crosshair;
}

.sig-error {
  color: #d32f2f; /* Rouge erreur */
  font-weight: bold;
  min-height: 1.4em; /* Réserve la place pour éviter le saut */
  transition: all 0.3s ease;
}

/* --- GAME 6 : Final Bouquet --- */
.final-stage {
  position: relative;
  text-align: center;
  overflow: hidden;
}

.bouquet-img {
  width: 100%;
  max-width: 400px;
  height: auto;
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  animation: popInBouquet 1s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes popInBouquet {
  from { transform: scale(0.5) translateY(50px); opacity: 0; }
  to   { transform: scale(1) translateY(0); opacity: 1; }
}

/* Feux d'artifice CSS simplifiés */
.firework {
  position: absolute;
  width: 10px; height: 10px;
  border-radius: 50%;
  pointer-events: none;
  animation: explode 1s ease-out forwards;
}
@keyframes explode {
  0% { transform: scale(1); opacity: 1; }
  100% { transform: scale(20); opacity: 0; }
}
